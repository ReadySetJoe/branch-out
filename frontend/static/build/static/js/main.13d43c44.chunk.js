(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{27:function(t,e,a){t.exports=a(55)},32:function(t,e,a){},53:function(t,e,a){},54:function(t,e,a){},55:function(t,e,a){"use strict";a.r(e);var s=a(0),n=a.n(s),i=a(18),o=a.n(i),r=(a(32),a(7)),l=a(19),c=a(20),u=a(25),m=a(21),d=a(3),p=a(26),g=a(4),_=a.n(g),h=a(22),y=a(23),b=a(24),f=a.n(b),v=(a(53),function(t){var e={backgroundImage:"url(".concat(t.item.album.images[0].url,")")},a={width:100*t.progress_ms/t.item.duration_ms+"%"};return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"main-wrapper"},n.a.createElement("div",{className:"now-playing__img"},n.a.createElement("img",{alt:"Album art for now playing",src:t.item.album.images[0].url})),n.a.createElement("div",{className:"now-playing__side"},n.a.createElement("div",{className:"now-playing__name"},t.item.name),n.a.createElement("div",{className:"now-playing__artist"},t.item.artists[0].name),n.a.createElement("div",{className:"now-playing__status"},t.is_playing?"Playing":"Paused"),n.a.createElement("div",{className:"progress"},n.a.createElement("div",{className:"progress__bar",style:a}))),n.a.createElement("div",{className:"background",style:e})," "))});a(54);_.a.defaults.xsrfCookieName="csrftoken",_.a.defaults.xsrfHeaderName="X-CSRFToken";var E=new f.a,N=["user-read-currently-playing","user-read-playback-state","user-read-private","user-read-email","user-top-read","playlist-modify-public"],k=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(u.a)(this,Object(m.a)(e).call(this,t))).state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:"",id:""}],duration_ms:0},is_playing:"Paused",progress_ms:0,root_artists:[],root_artists_selected:[],use_currently_playing:!1,use_top_artists:!1,root_artists_selection_complete:!1,songs:[],events:[]},a.getNowPlaying=a.getNowPlaying.bind(Object(d.a)(a)),a.useTopArtists=a.useTopArtists.bind(Object(d.a)(a)),a.useNowPlaying=a.useNowPlaying.bind(Object(d.a)(a)),a.addNowPlayingToList=a.addNowPlayingToList.bind(Object(d.a)(a)),a.selectArtist=a.selectArtist.bind(Object(d.a)(a)),a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t,e=this;this.state.token||_.a.get("/api/v1/user-social-auth/").then((function(a){t=a.data[0].extra_data.access_token,e.setState({token:t}),E.setAccessToken(t),e.getNowPlaying()})).catch((function(t){console.log(t)}))}},{key:"getNowPlaying",value:function(){var t=this;E.getMyCurrentPlaybackState().then((function(e){t.setState({item:e.item,is_playing:e.is_playing,progress_ms:e.progress_ms}),console.log(e)})).catch((function(t){console.log(t)}))}},{key:"useNowPlaying",value:function(){var t=this;E.getArtistRelatedArtists(this.state.item.artists[0].id).then((function(e){t.setState({root_artists:e.artists,use_currently_playing:!0,use_top_artists:!1}),console.log(e)})).catch((function(t){return console.log(t)}))}},{key:"useTopArtists",value:function(){var t=this;E.getMyTopArtists().then((function(e){t.setState({root_artists:e.items,use_top_artists:!0,use_currently_playing:!1})})).catch((function(t){console.log(t)}))}},{key:"addNowPlayingToList",value:function(){var t=new FormData;t.append("title",this.state.item.name),t.append("artist",this.state.item.artists[0].name),t.append("url",this.state.item.href),t.append("track_number",this.state.songs.length),t.append("duration_ms",this.state.item.duration_ms),localStorage.setItem("formData",JSON.stringify(t)),localStorage.setItem("state-addnowplaying",JSON.stringify(this.state)),console.log(t),_()({method:"post",url:"/api/v1/songs/",config:{headers:{"content-type":"multipart/form-data"}},data:t}).then((function(){console.log("Current song added to song list!")})).catch((function(t){console.log(t)}))}},{key:"selectArtist",value:function(t){if(this.state.root_artists_selected.includes(t)){var e=Object(r.a)(this.state.root_artists_selected);e.splice(e.indexOf(t),1),this.setState({root_artists_selected:e})}else{var a=Object(r.a)(this.state.root_artists_selected);a.push(t),this.setState({root_artists_selected:a})}}},{key:"render",value:function(){var t=this,e=this.state.root_artists.map((function(e){return n.a.createElement("button",{className:"btn root-artist-btn ".concat(t.state.root_artists_selected.includes(e)?"btn-selected":""),onClick:function(){return t.selectArtist(e)}},e.name)}));return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("nav",{className:"scrollspy-placeholder"},n.a.createElement("ul",null)),!this.state.token&&n.a.createElement("div",null,n.a.createElement("a",{className:"btn btn--loginApp-link",href:"/social/login/spotify/"},"Login to Spotify (Authorization Code)"),n.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("45eecc039efd45ad9b8e183c653e2885","&redirect_uri=").concat("http://localhost:8000/","&scope=").concat(N.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify (Implicit Grant)")),this.state.token&&n.a.createElement("div",null,n.a.createElement("div",{className:"player-wrapper"},n.a.createElement(v,{item:this.state.item,is_playing:this.state.is_playing,progress_ms:this.state.progress_ms}),n.a.createElement("button",{className:"btn p-1 refresh-btn",onClick:function(){return t.getNowPlaying()}},n.a.createElement("span",{className:"p-1"},n.a.createElement(h.a,{icon:y.a})))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("button",{className:"btn ".concat(this.state.use_currently_playing?"btn-selected":""," "),onClick:function(){return t.useNowPlaying()}},"Use Artists Related to Now Playing"),n.a.createElement("button",{className:"btn ".concat(this.state.use_top_artists?"btn-selected":""," "),onClick:function(){return t.useTopArtists()}},"Use Your Top Artists")),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,e),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",{className:"".concat(this.state.use_currently_playing||this.state.use_top_artists?"d-flex":"d-none"," ")},n.a.createElement("h2",null,"Select at least 3 starting bands to continue"),n.a.createElement("button",{onClick:function(){t.state.root_artists_selected.length>=3&&t.setState({root_artists_selection_complete:!0})},className:"".concat(this.state.root_artists_selected.length>=3?"btn":"btn-disabled")},"Continue Using These Bands"))))}}]),e}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.13d43c44.chunk.js.map