(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{26:function(e,t,a){e.exports=a(54)},31:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(17),o=a.n(i),r=(a(31),a(18)),l=a(19),c=a(25),m=a(20),u=a(3),p=a(24),g=a(4),d=a.n(g),h=a(21),y=a(22),f=a(23),_=a.n(f),b=(a(52),function(e){var t={backgroundImage:"url(".concat(e.item.album.images[0].url,")")},a={width:100*e.progress_ms/e.item.duration_ms+"%"};return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"main-wrapper"},s.a.createElement("div",{className:"now-playing__img"},s.a.createElement("img",{alt:"Album art for now playing",src:e.item.album.images[0].url})),s.a.createElement("div",{className:"now-playing__side"},s.a.createElement("div",{className:"now-playing__name"},e.item.name),s.a.createElement("div",{className:"now-playing__artist"},e.item.artists[0].name),s.a.createElement("div",{className:"now-playing__status"},e.is_playing?"Playing":"Paused"),s.a.createElement("div",{className:"progress"},s.a.createElement("div",{className:"progress__bar",style:a}))),s.a.createElement("div",{className:"background",style:t})," "))});a(53);d.a.defaults.xsrfCookieName="csrftoken",d.a.defaults.xsrfHeaderName="X-CSRFToken";var v=new _.a,k=["user-read-currently-playing","user-read-playback-state","user-read-private","user-read-email","user-top-read","playlist-modify-public"],E=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{}),w=E.access_token;w&&(v.setAccessToken(w),console.log(w)),window.location.hash="";var N=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0,top_artists:[],selected_top_artists:[],use_currently_playing:!0,songs:[],events:[]},a.getCurrentlyPlaying=a.getCurrentlyPlaying.bind(Object(u.a)(a)),a.getTopArtists=a.getTopArtists.bind(Object(u.a)(a)),a.addNowPlayingToList=a.addNowPlayingToList.bind(Object(u.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=E.access_token;e&&this.setState({token:e}),this.getCurrentlyPlaying(),this.getTopArtists()}},{key:"getCurrentlyPlaying",value:function(){var e=this;v.getMyCurrentPlaybackState().then((function(t){e.setState({item:t.item,is_playing:t.is_playing,progress_ms:t.progress_ms}),console.log(t),d.a.post()})).catch((function(e){console.log(e)}))}},{key:"getTopArtists",value:function(){var e=this;v.getMyTopArtists().then((function(t){e.setState({top_artists:t.items.map((function(e){return e.name}))})})).catch((function(e){console.log(e)}))}},{key:"addNowPlayingToList",value:function(){var e=new FormData;e.append("title",this.state.item.name),e.append("artist",this.state.item.album.images[0].url),e.append("url",this.state.item.href),e.append("track_number",this.state.songs.length),e.append("duration_ms",this.state.item.duration_ms),localStorage.setItem("formData",e),console.log(e),d.a.post("/api/v1/songs/",e,{headers:{"content-type":"multipart/form-data"}}).then((function(){console.log("Current song added to song list!")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("nav",null,s.a.createElement("ul",null)),!this.state.token&&s.a.createElement("div",null,s.a.createElement("a",{className:"btn btn--loginApp-link",href:"/social/login/spotify/"},"Login to Spotify (Authorization Code)"),s.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("45eecc039efd45ad9b8e183c653e2885","&redirect_uri=").concat("http://localhost:3000/","&scope=").concat(k.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify (Implicit Grant)")),s.a.createElement("div",{className:"player-wrapper"},this.state.token&&s.a.createElement(b,{item:this.state.item,is_playing:this.state.is_playing,progress_ms:this.state.progress_ms}),this.state.token&&s.a.createElement("button",{className:"btn p-1 refresh-btn",onClick:function(){return e.getCurrentlyPlaying()}},s.a.createElement("span",{className:"p-1"},s.a.createElement(h.a,{icon:y.a})))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{onClick:function(){return e.addNowPlayingToList()}},"Use This Artist"),s.a.createElement("button",{onClick:function(){return e.getTopArtists()}},"Use Top Artists"),s.a.createElement("div",null,this.state.top_artists)))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.8e08c97e.chunk.js.map